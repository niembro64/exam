{"ast":null,"code":"import _toConsumableArray from\"C:/Users/nieme/Documents/CodingDojo/MERNStack2022/exam/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _defineProperty from\"C:/Users/nieme/Documents/CodingDojo/MERNStack2022/exam/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/nieme/Documents/CodingDojo/MERNStack2022/exam/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/nieme/Documents/CodingDojo/MERNStack2022/exam/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from\"axios\";import React,{useEffect,useState,createElement}from\"react\";import{useParams}from\"react-router-dom/cjs/react-router-dom.min\";import{Switch,Route,Link}from\"react-router-dom\";import{useHistory}from\"react-router-dom/cjs/react-router-dom.min\";import Card from\"./Card\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Home=function Home(props){var _useState=useState({assignment:\"none\",port:0}),_useState2=_slicedToArray(_useState,2),dbtest=_useState2[0],setDbtest=_useState2[1];var _useState3=useState({pirateName:\"\",imageUrl:\"\",numChests:0,catchPhrase:\"\",crewPosition:\"\",pegLeg:true,eyePatch:true,hookHand:true}),_useState4=_slicedToArray(_useState3,2),form=_useState4[0],setForm=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),fromDb=_useState6[0],setFromDb=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),loaded=_useState8[0],setLoaded=_useState8[1];var _useState9=useState({name:{}}),_useState10=_slicedToArray(_useState9,2),error=_useState10[0],setError=_useState10[1];var history=useHistory();// history.push(`/${category}/${detail}`);\nuseEffect(function(){p(\"Running useEffect\");axios.get(\"http://localhost:9000/api\").then(function(res){// console.log(res);\nsetDbtest(res.data);}).catch(function(err){return console.log(err);});// .catch((err) => console.log(err.response.data.err.errors));\nupdateFromDb();setLoaded(false);},[loaded]);var p=function p(a){console.log(a);};var updateFromDb=function updateFromDb(){p(\"Running updateFromDb\");axios.get(\"http://localhost:9000/api/pirate/\").then(function(res){// console.log(res.data);\nsetFromDb(res.data);}).catch(function(err){return console.log(err.response.error.errors);});// .catch((err) => console.log(err.response.error.errors));\n};var onSubmitHandler=function onSubmitHandler(event){p(\"Running onSubmitHandler\");event.preventDefault();axios.post(\"http://localhost:9000/api/pirate/create\",form).then(function(res){console.log(res.data);setLoaded(true);setError({});}).catch(function(err){p(\"in OnSubmitHandler Error\");console.log(err.response.data.error.errors);setError(err.response.data.error.errors);});};var onChangeHandler=function onChangeHandler(event){p(\"Running onChangeHandler\");event.preventDefault();// p(event.target.value);\nvar newState=_objectSpread(_objectSpread({},form),{},_defineProperty({},event.target.name,event.target.value));setForm(newState);};var onDeleteHandler=function onDeleteHandler(_id,arrIndex,pirateName){if(window.confirm(\"Are you sure you want to delete \".concat(pirateName,\"?\"))){console.log(\"inside on click delete\");axios.delete(\"http://localhost:9000/api/pirate/delete/\".concat(_id)).then(function(res){console.log(res.data);var copyState=_toConsumableArray(fromDb);copyState.splice(arrIndex,1);setFromDb(copyState);}).catch(function(err){return console.log(error.response.data.err.errors);});}};var FloatLabel=function(){// add active class\nvar handleFocus=function handleFocus(e){var target=e.target;target.parentNode.classList.add(\"active\");target.setAttribute(\"placeholder\",target.getAttribute(\"data-placeholder\"));};// remove active class\nvar handleBlur=function handleBlur(e){var target=e.target;if(!target.value){target.parentNode.classList.remove(\"active\");}target.removeAttribute(\"placeholder\");};// register events\nvar bindEvents=function bindEvents(element){var floatField=element.querySelector(\"input\");floatField.addEventListener(\"focus\",handleFocus);floatField.addEventListener(\"blur\",handleBlur);};// get DOM elements\nvar init=function init(){var floatContainers=document.querySelectorAll(\".float-container\");floatContainers.forEach(function(element){if(element.querySelector(\"input\").value){element.classList.add(\"active\");}bindEvents(element);});};return{init:init};}();FloatLabel.init();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"box\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\" Pirate Crew \\uD83C\\uDFF4\\u200D\\u2620\\uFE0F\"}),/*#__PURE__*/_jsx(Link,{to:\"/add\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary px-4\",children:/*#__PURE__*/_jsx(\"big\",{children:\"+ Pirate\"})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"main\",children:fromDb.map(function(item,i){return/*#__PURE__*/_jsx(Card,{pirateId:item._id,catchPhrase:item.catchPhrase,pirateName:item.pirateName,imageUrl:item.imageUrl},i);})})]});};export default Home;","map":{"version":3,"sources":["C:/Users/nieme/Documents/CodingDojo/MERNStack2022/exam/client/src/views/Home.jsx"],"names":["axios","React","useEffect","useState","createElement","useParams","Switch","Route","Link","useHistory","Card","Home","props","assignment","port","dbtest","setDbtest","pirateName","imageUrl","numChests","catchPhrase","crewPosition","pegLeg","eyePatch","hookHand","form","setForm","fromDb","setFromDb","loaded","setLoaded","name","error","setError","history","p","get","then","res","data","catch","err","console","log","updateFromDb","a","response","errors","onSubmitHandler","event","preventDefault","post","onChangeHandler","newState","target","value","onDeleteHandler","_id","arrIndex","window","confirm","delete","copyState","splice","FloatLabel","handleFocus","e","parentNode","classList","add","setAttribute","getAttribute","handleBlur","remove","removeAttribute","bindEvents","element","floatField","querySelector","addEventListener","init","floatContainers","document","querySelectorAll","forEach","map","item","i"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\nimport React, { useEffect, useState, createElement } from \"react\";\r\nimport { useParams } from \"react-router-dom/cjs/react-router-dom.min\";\r\nimport { Switch, Route, Link } from \"react-router-dom\";\r\nimport { useHistory } from \"react-router-dom/cjs/react-router-dom.min\";\r\nimport Card from \"./Card\";\r\n\r\nconst Home = (props) => {\r\n    const [dbtest, setDbtest] = useState({ assignment: \"none\", port: 0 });\r\n    const [form, setForm] = useState({\r\n        pirateName: \"\",\r\n        imageUrl: \"\",\r\n        numChests: 0,\r\n        catchPhrase: \"\",\r\n        crewPosition: \"\",\r\n        pegLeg: true,\r\n        eyePatch: true,\r\n        hookHand: true,\r\n    });\r\n    const [fromDb, setFromDb] = useState([]);\r\n    const [loaded, setLoaded] = useState(false);\r\n    const [error, setError] = useState({ name: {} });\r\n    const history = useHistory();\r\n    // history.push(`/${category}/${detail}`);\r\n\r\n    useEffect(() => {\r\n        p(\"Running useEffect\");\r\n\r\n        axios\r\n            .get(\"http://localhost:9000/api\")\r\n            .then((res) => {\r\n                // console.log(res);\r\n                setDbtest(res.data);\r\n            })\r\n            .catch((err) => console.log(err));\r\n        // .catch((err) => console.log(err.response.data.err.errors));\r\n\r\n        updateFromDb();\r\n        setLoaded(false);\r\n    }, [loaded]);\r\n\r\n    const p = (a) => {\r\n        console.log(a);\r\n    };\r\n\r\n    const updateFromDb = () => {\r\n        p(\"Running updateFromDb\");\r\n        axios\r\n            .get(\"http://localhost:9000/api/pirate/\")\r\n            .then((res) => {\r\n                // console.log(res.data);\r\n                setFromDb(res.data);\r\n            })\r\n            .catch((err) => console.log(err.response.error.errors));\r\n        // .catch((err) => console.log(err.response.error.errors));\r\n    };\r\n\r\n    const onSubmitHandler = (event) => {\r\n        p(\"Running onSubmitHandler\");\r\n        event.preventDefault();\r\n\r\n        axios\r\n            .post(\"http://localhost:9000/api/pirate/create\", form)\r\n            .then((res) => {\r\n                console.log(res.data);\r\n                setLoaded(true);\r\n                setError({});\r\n            })\r\n            .catch((err) => {\r\n                p(\"in OnSubmitHandler Error\");\r\n                console.log(err.response.data.error.errors);\r\n                setError(err.response.data.error.errors);\r\n            });\r\n    };\r\n\r\n    const onChangeHandler = (event) => {\r\n        p(\"Running onChangeHandler\");\r\n        event.preventDefault();\r\n\r\n        // p(event.target.value);\r\n        const newState = {\r\n            ...form,\r\n            [event.target.name]: event.target.value,\r\n        };\r\n        setForm(newState);\r\n    };\r\n\r\n    const onDeleteHandler = (_id, arrIndex, pirateName) => {\r\n        if (window.confirm(`Are you sure you want to delete ${pirateName}?`)) {\r\n            console.log(\"inside on click delete\");\r\n            axios\r\n                .delete(`http://localhost:9000/api/pirate/delete/${_id}`)\r\n                .then((res) => {\r\n                    console.log(res.data);\r\n                    const copyState = [...fromDb];\r\n                    copyState.splice(arrIndex, 1);\r\n                    setFromDb(copyState);\r\n                })\r\n                .catch((err) => console.log(error.response.data.err.errors));\r\n        }\r\n    };\r\n\r\n    const FloatLabel = (() => {\r\n        // add active class\r\n        const handleFocus = (e) => {\r\n            const target = e.target;\r\n            target.parentNode.classList.add(\"active\");\r\n            target.setAttribute(\r\n                \"placeholder\",\r\n                target.getAttribute(\"data-placeholder\")\r\n            );\r\n        };\r\n\r\n        // remove active class\r\n        const handleBlur = (e) => {\r\n            const target = e.target;\r\n            if (!target.value) {\r\n                target.parentNode.classList.remove(\"active\");\r\n            }\r\n            target.removeAttribute(\"placeholder\");\r\n        };\r\n\r\n        // register events\r\n        const bindEvents = (element) => {\r\n            const floatField = element.querySelector(\"input\");\r\n            floatField.addEventListener(\"focus\", handleFocus);\r\n            floatField.addEventListener(\"blur\", handleBlur);\r\n        };\r\n\r\n        // get DOM elements\r\n        const init = () => {\r\n            const floatContainers =\r\n                document.querySelectorAll(\".float-container\");\r\n\r\n            floatContainers.forEach((element) => {\r\n                if (element.querySelector(\"input\").value) {\r\n                    element.classList.add(\"active\");\r\n                }\r\n\r\n                bindEvents(element);\r\n            });\r\n        };\r\n\r\n        return {\r\n            init: init,\r\n        };\r\n    })();\r\n\r\n    FloatLabel.init();\r\n\r\n    return (\r\n        <>\r\n            <div className=\"box\">\r\n                <h2> Pirate Crew 🏴‍☠️</h2>\r\n                <Link to={\"/add\"}>\r\n                    <button className=\"btn btn-primary px-4\">\r\n                        <big>+ Pirate</big>\r\n                    </button>\r\n                </Link>\r\n            </div>\r\n            <div className=\"main\">\r\n                {fromDb.map((item, i) => {\r\n                    return (\r\n                        <Card\r\n                            key={i}\r\n                            pirateId={item._id}\r\n                            catchPhrase={item.catchPhrase}\r\n                            pirateName={item.pirateName}\r\n                            imageUrl={item.imageUrl}\r\n                          \r\n                        />\r\n                    );\r\n                })}\r\n            </div>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default Home;\r\n"]},"metadata":{},"sourceType":"module"}