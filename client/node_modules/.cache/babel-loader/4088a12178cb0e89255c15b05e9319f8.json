{"ast":null,"code":"import _defineProperty from\"C:/Users/nieme/Documents/CodingDojo/MERNStack2022/exam/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/nieme/Documents/CodingDojo/MERNStack2022/exam/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/nieme/Documents/CodingDojo/MERNStack2022/exam/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import{useEffect,useState,createElement}from\"react\";import{useParams}from\"react-router-dom/cjs/react-router-dom.min\";import{Switch,Route,Link}from\"react-router-dom\";import axios from\"axios\";import{useHistory}from\"react-router-dom/cjs/react-router-dom.min\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var p=function p(a){console.log(a);};var Edit=function Edit(props){var _useParams=useParams(),_id=_useParams._id;// const [one, setOne] = useState({\n//   name: \"default\",\n// });\nvar _useState=useState({pirateName:\"\",imageUrl:\"\",numChests:0,catchPhrase:\"\",crewPosition:\"\",pegLeg:true,eyePatch:true,hookHand:true}),_useState2=_slicedToArray(_useState,2),form=_useState2[0],setForm=_useState2[1];var _useState3=useState({name:{}}),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var history=useHistory();useEffect(function(){p(\"useEffect Running\");axios.get(\"http://localhost:9000/api/author/\".concat(_id)).then(function(res){console.log(res.data);// setOne(res.data);\nsetForm(res.data);}).catch(function(err){return console.log(err.response.data.error.errors);});},[_id]);var onDeleteHandler=function onDeleteHandler(_id){if(window.confirm(\"Are you sure you want to delete this item?\")){console.log(\"inside on click delete\");axios.delete(\"http://localhost:9000/api/author/delete/\".concat(_id)).then(function(res){return console.log(res.data);}).catch(function(err){return console.log(err.response.data.error.errors);});}};var onSubmitHandler=function onSubmitHandler(event){event.preventDefault();console.log(\"Edit | onSubmitHandler | Jumped In\");var copyState={name:form.name};axios.patch(\"http://localhost:9000/api/author/update/\".concat(form._id),{name:form.name}).then(function(res){console.log(\"Edit | onSubmitHandler | Success Submitting\");console.log(res.data);history.push(\"/\");}).catch(function(err){p(\"Edit | onSubmitHandler | Error\");console.log(err.response.data.error.errors);setError(err.response.data.error.errors);});};var onChangeHandler=function onChangeHandler(event){event.preventDefault();// p(event.target.value);\nvar newState=_objectSpread(_objectSpread({},form),{},_defineProperty({},event.target.name,event.target.value));setForm(newState);};var FloatLabel=function(){// add active class\nvar handleFocus=function handleFocus(e){var target=e.target;target.parentNode.classList.add(\"active\");target.setAttribute(\"placeholder\",target.getAttribute(\"data-placeholder\"));};// remove active class\nvar handleBlur=function handleBlur(e){var target=e.target;if(!target.value){target.parentNode.classList.remove(\"active\");}target.removeAttribute(\"placeholder\");};// register events\nvar bindEvents=function bindEvents(element){var floatField=element.querySelector(\"input\");floatField.addEventListener(\"focus\",handleFocus);floatField.addEventListener(\"blur\",handleBlur);};// get DOM elements\nvar init=function init(){var floatContainers=document.querySelectorAll(\".float-container\");floatContainers.forEach(function(element){if(element.querySelector(\"input\").value){element.classList.add(\"active\");}bindEvents(element);});};return{init:init};}();FloatLabel.init();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"box\",children:[/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary mx-4\",children:\"Cancel\"})}),/*#__PURE__*/_jsx(\"h2\",{children:\"Edit\"}),/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){onDeleteHandler(form._id);},className:\"btn btn-danger mx-4\",children:\"delete\"})})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmitHandler,className:\"box3\",children:[/*#__PURE__*/_jsxs(\"div\",{id:\"floatContainer\",className:\"float-container\",children:[/*#__PURE__*/_jsx(\"label\",{style:{position:\"absolute\",zIndex:1},htmlFor:\"name\",children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{style:{position:\"relative\",zIndex:2},autoFocus:\"autofocus\",id:\"floatField\",type:\"text\",name:\"name\",value:form.name,onChange:onChangeHandler// placeholder=\"\"\n// default=\"asdf\"\n})]}),/*#__PURE__*/_jsx(\"span\",{className:\"alert-danger\",children:error.name&&error.name.message}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",className:\"btn btn-success mx-4\",value:\"Update\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"box\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"form\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\" \",form.name]})]})]});};export default Edit;// module.exports.updateExistingAUTHOR = (req, res) => {\n//   AUTHOR.findOneAndUpdate({ _id: req.params._id }, req.body, { new: true })\n//     .then((updatedAUTHOR) => res.json(updatedAUTHOR))\n//     .catch((err) =>\n//       res.status(400).json({ message: \"Something went wrong\", error: err })\n//     );\n// };\n// pre backend validations","map":{"version":3,"sources":["C:/Users/nieme/Documents/CodingDojo/MERNStack2022/exam/client/src/views/Edit.jsx"],"names":["React","useEffect","useState","createElement","useParams","Switch","Route","Link","axios","useHistory","p","a","console","log","Edit","props","_id","pirateName","imageUrl","numChests","catchPhrase","crewPosition","pegLeg","eyePatch","hookHand","form","setForm","name","error","setError","history","get","then","res","data","catch","err","response","errors","onDeleteHandler","window","confirm","delete","onSubmitHandler","event","preventDefault","copyState","patch","push","onChangeHandler","newState","target","value","FloatLabel","handleFocus","e","parentNode","classList","add","setAttribute","getAttribute","handleBlur","remove","removeAttribute","bindEvents","element","floatField","querySelector","addEventListener","init","floatContainers","document","querySelectorAll","forEach","position","zIndex","message"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { useEffect, useState, createElement } from \"react\";\r\nimport { useParams } from \"react-router-dom/cjs/react-router-dom.min\";\r\nimport { Switch, Route, Link } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { useHistory } from \"react-router-dom/cjs/react-router-dom.min\";\r\n\r\nconst p = (a) => {\r\n  console.log(a);\r\n};\r\nconst Edit = (props) => {\r\n  const { _id } = useParams();\r\n  // const [one, setOne] = useState({\r\n  //   name: \"default\",\r\n\r\n  // });\r\n  const [form, setForm] = useState({\r\n    pirateName: \"\",\r\n    imageUrl: \"\",\r\n    numChests: 0,\r\n    catchPhrase: \"\",\r\n    crewPosition: \"\",\r\n    pegLeg: true,\r\n    eyePatch: true,\r\n    hookHand: true,\r\n  });\r\n  const [error, setError] = useState({ name: {} });\r\n\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    p(\"useEffect Running\");\r\n\r\n    axios\r\n      .get(`http://localhost:9000/api/author/${_id}`)\r\n      .then((res) => {\r\n        console.log(res.data);\r\n        // setOne(res.data);\r\n        setForm(res.data);\r\n      })\r\n      .catch((err) => console.log(err.response.data.error.errors));\r\n  }, [_id]);\r\n\r\n\r\n  const onDeleteHandler = (_id) => {\r\n    if (window.confirm(`Are you sure you want to delete this item?`)) {\r\n      console.log(\"inside on click delete\");\r\n      axios\r\n        .delete(`http://localhost:9000/api/author/delete/${_id}`)\r\n        .then((res) => console.log(res.data))\r\n        .catch((err) => console.log(err.response.data.error.errors));\r\n    }\r\n  };\r\n\r\n  const onSubmitHandler = (event) => {\r\n    event.preventDefault();\r\n    console.log(\"Edit | onSubmitHandler | Jumped In\")\r\n\r\n    const copyState = {\r\n      name: form.name,\r\n    };\r\n\r\n    axios\r\n      .patch(`http://localhost:9000/api/author/update/${form._id}`, {name: form.name})\r\n      .then((res) => {\r\n        console.log(\"Edit | onSubmitHandler | Success Submitting\")\r\n        console.log(res.data);\r\n        history.push(`/`);\r\n      })\r\n      .catch((err) => {\r\n        p(\"Edit | onSubmitHandler | Error\");\r\n        console.log(err.response.data.error.errors);\r\n        setError(err.response.data.error.errors);\r\n      });\r\n  };\r\n\r\n  const onChangeHandler = (event) => {\r\n    event.preventDefault();\r\n\r\n    // p(event.target.value);\r\n    const newState = {\r\n      ...form,\r\n      [event.target.name]: event.target.value,\r\n    };\r\n    setForm(newState);\r\n  };\r\n\r\n  const FloatLabel = (() => {\r\n    // add active class\r\n    const handleFocus = (e) => {\r\n      const target = e.target;\r\n      target.parentNode.classList.add(\"active\");\r\n      target.setAttribute(\r\n        \"placeholder\",\r\n        target.getAttribute(\"data-placeholder\")\r\n      );\r\n    };\r\n\r\n    // remove active class\r\n    const handleBlur = (e) => {\r\n      const target = e.target;\r\n      if (!target.value) {\r\n        target.parentNode.classList.remove(\"active\");\r\n      }\r\n      target.removeAttribute(\"placeholder\");\r\n    };\r\n\r\n    // register events\r\n    const bindEvents = (element) => {\r\n      const floatField = element.querySelector(\"input\");\r\n      floatField.addEventListener(\"focus\", handleFocus);\r\n      floatField.addEventListener(\"blur\", handleBlur);\r\n    };\r\n\r\n    // get DOM elements\r\n    const init = () => {\r\n      const floatContainers = document.querySelectorAll(\".float-container\");\r\n\r\n      floatContainers.forEach((element) => {\r\n        if (element.querySelector(\"input\").value) {\r\n          element.classList.add(\"active\");\r\n        }\r\n\r\n        bindEvents(element);\r\n      });\r\n    };\r\n\r\n    return {\r\n      init: init,\r\n    };\r\n  })();\r\n\r\n  FloatLabel.init();\r\n\r\n  return (\r\n    <>\r\n      <div className=\"box\">\r\n        <Link to={\"/\"}>\r\n          <button className=\"btn btn-secondary mx-4\">Cancel</button>\r\n        </Link>\r\n        <h2>Edit</h2>\r\n        <Link to={`/`}>\r\n          <button\r\n            onClick={() => {\r\n              onDeleteHandler(form._id);\r\n            }}\r\n            className=\"btn btn-danger mx-4\"\r\n          >\r\n            delete\r\n          </button>\r\n        </Link>\r\n      </div>\r\n\r\n      <form onSubmit={onSubmitHandler} className=\"box3\">\r\n        <div id=\"floatContainer\" className=\"float-container\">\r\n          <label style={{ position: \"absolute\", zIndex: 1 }} htmlFor=\"name\">\r\n            Name\r\n          </label>\r\n          <input\r\n            style={{ position: \"relative\", zIndex: 2 }}\r\n            autoFocus=\"autofocus\"\r\n            id=\"floatField\"\r\n            type=\"text\"\r\n            name=\"name\"\r\n            value={form.name}\r\n            onChange={onChangeHandler}\r\n\r\n            // placeholder=\"\"\r\n            // default=\"asdf\"\r\n          />\r\n        </div>\r\n        <span className=\"alert-danger\">{error.name && error.name.message}</span>\r\n        <input type=\"submit\" className=\"btn btn-success mx-4\" value=\"Update\"/>\r\n        {/* <input type=\"submit\" className=\"btn btn-success mx-4\" value=\"Update\"/> */}\r\n      </form>\r\n      <div className=\"box\">\r\n        <p>form</p>\r\n        <p> {form.name}</p>\r\n      </div>\r\n      {/* <div className=\"box\">\r\n        <p>one</p>\r\n        <p> {one.name}</p>\r\n\r\n      </div> */}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Edit;\r\n\r\n// module.exports.updateExistingAUTHOR = (req, res) => {\r\n//   AUTHOR.findOneAndUpdate({ _id: req.params._id }, req.body, { new: true })\r\n//     .then((updatedAUTHOR) => res.json(updatedAUTHOR))\r\n//     .catch((err) =>\r\n//       res.status(400).json({ message: \"Something went wrong\", error: err })\r\n//     );\r\n// };\r\n\r\n// pre backend validations\r\n"]},"metadata":{},"sourceType":"module"}